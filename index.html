<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Macro Oracle Dashboard v4.0</title>
<style>
:root{--bg:#0a0e17;--card:#131a2b;--border:#1e2a42;--text:#e0e6f0;--dim:#6b7d9e;--green:#00d68f;--red:#ff4757;--gold:#ffd700;--blue:#4da6ff;--orange:#ff9f43;--purple:#a855f7}
*{margin:0;padding:0;box-sizing:border-box}
body{background:var(--bg);color:var(--text);font-family:'SF Mono','Cascadia Code','Fira Code',monospace;font-size:13px;padding:12px}
h1{font-size:18px;color:var(--gold);margin-bottom:4px;letter-spacing:1px}
.sub{color:var(--dim);font-size:11px;margin-bottom:12px;display:flex;justify-content:space-between;flex-wrap:wrap;gap:4px}
.dot{display:inline-block;width:8px;height:8px;border-radius:50%;margin-right:4px;animation:p 2s infinite}
.dot.ok{background:var(--green)}.dot.err{background:var(--red)}.dot.loading{background:var(--orange)}
@keyframes p{0%,100%{opacity:1}50%{opacity:.3}}
.grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(340px,1fr));gap:10px;margin-bottom:10px}
.card{background:var(--card);border:1px solid var(--border);border-radius:8px;padding:12px}
.card.span2{grid-column:span 2}
.ct{font-size:12px;font-weight:700;color:var(--blue);margin-bottom:8px;text-transform:uppercase;letter-spacing:.5px;border-bottom:1px solid var(--border);padding-bottom:5px;display:flex;justify-content:space-between;align-items:center}
.ct .src{font-size:9px;color:var(--dim);font-weight:400;text-transform:none}
table{width:100%;border-collapse:collapse}
th{text-align:left;color:var(--dim);font-size:10px;padding:2px 5px;font-weight:400}
td{padding:3px 5px;font-size:11px;border-top:1px solid rgba(30,42,66,.5)}
.v{font-weight:700;font-size:12px}
.up{color:var(--green)}.dn{color:var(--red)}.nt{color:var(--orange)}.gl{color:var(--gold)}.dm{color:var(--dim)}
.sig{display:inline-block;padding:1px 6px;border-radius:3px;font-size:10px;font-weight:700}
.sg{background:rgba(0,214,143,.15);color:var(--green)}.sr{background:rgba(255,71,87,.15);color:var(--red)}.sy{background:rgba(255,159,67,.15);color:var(--orange)}
.meter{height:5px;background:var(--border);border-radius:3px;overflow:hidden;margin:3px 0}
.meter-fill{height:100%;border-radius:3px;transition:width 1s}
.src-tag{font-size:9px;padding:1px 4px;border-radius:3px;cursor:pointer;text-decoration:none;margin-left:2px}
.src-tag:hover{opacity:.7}
.sp{background:rgba(77,166,255,.2);color:var(--blue)}
.sv{background:rgba(107,125,158,.2);color:var(--dim)}
.fb{font-size:9px;padding:1px 4px;border-radius:3px;margin-left:2px}
.fb.ok{background:rgba(0,214,143,.15);color:var(--green)}
.fb.stale{background:rgba(255,159,67,.2);color:var(--orange)}
/* å››è±¡é™ */
.qb{display:grid;grid-template-columns:1fr 1fr;grid-template-rows:1fr 1fr;gap:3px;height:100px;margin:6px 0}
.qb div{display:flex;align-items:center;justify-content:center;border-radius:4px;font-size:10px;font-weight:700;text-align:center;padding:4px}
.q-tl{background:rgba(255,71,87,.12);color:var(--red)}
.q-tr{background:rgba(255,159,67,.12);color:var(--orange)}
.q-bl{background:rgba(77,166,255,.12);color:var(--blue)}
.q-br{background:rgba(0,214,143,.2);color:var(--green)}
/* Score bars */
.sbar{display:flex;align-items:center;gap:6px;margin:3px 0}
.slabel{width:80px;font-size:10px;color:var(--dim);flex-shrink:0}
.strack{flex:1;height:7px;background:var(--border);border-radius:3px;overflow:hidden}
.sfill{height:100%;border-radius:3px;transition:width 1s}
.snum{width:28px;text-align:right;font-weight:700;font-size:11px;flex-shrink:0}
/* Alert/Opp boxes */
.abox{background:rgba(255,71,87,.08);border:1px solid rgba(255,71,87,.3);border-radius:5px;padding:8px;margin:4px 0}
.abox .at{color:var(--red);font-weight:700;font-size:11px;margin-bottom:3px}
.obox{background:rgba(0,214,143,.08);border:1px solid rgba(0,214,143,.3);border-radius:5px;padding:8px;margin:4px 0}
.obox .at{color:var(--green);font-weight:700;font-size:11px;margin-bottom:3px}
.nbox{background:rgba(77,166,255,.06);border:1px solid rgba(77,166,255,.25);border-radius:5px;padding:8px;margin:4px 0}
.nbox .nt-h{color:var(--blue);font-weight:700;font-size:11px;margin-bottom:3px}
.banner{background:rgba(255,71,87,.15);border:1px solid var(--red);border-radius:5px;padding:7px 10px;margin-bottom:10px;font-size:11px;display:none}
.banner.show{display:block}
/* Calendar */
.cal-item{display:flex;align-items:flex-start;gap:8px;padding:5px 0;border-top:1px solid rgba(30,42,66,.5)}
.cal-item:first-child{border-top:none}
.cal-date{font-size:10px;font-weight:700;min-width:60px;padding-top:1px}
.cal-date.past{color:var(--dim)}
.cal-date.soon{color:var(--orange)}
.cal-date.today{color:var(--red)}
.cal-date.future{color:var(--blue)}
.cal-body{flex:1}
.cal-title{font-size:11px;font-weight:700}
.cal-desc{font-size:10px;color:var(--dim);margin-top:1px}
.cal-badge{font-size:9px;padding:1px 5px;border-radius:3px;margin-left:5px}
.cb-high{background:rgba(255,71,87,.2);color:var(--red)}
.cb-med{background:rgba(255,159,67,.2);color:var(--orange)}
.cb-low{background:rgba(77,166,255,.2);color:var(--blue)}
/* Analyst views */
.analyst-card{padding:7px 0;border-top:1px solid rgba(30,42,66,.5)}
.analyst-card:first-child{border-top:none}
.analyst-name{font-size:11px;font-weight:700;color:var(--gold)}
.analyst-date{font-size:9px;color:var(--dim);margin-left:6px}
.analyst-view{font-size:10px;color:var(--text);margin-top:3px;line-height:1.5}
.analyst-signal{font-size:10px;margin-top:3px}
/* on-chain gauge */
.gauge-row{display:flex;align-items:center;gap:6px;margin:3px 0}
.gauge-label{width:90px;font-size:10px;color:var(--dim);flex-shrink:0}
.gauge-val{width:70px;font-weight:700;font-size:11px;flex-shrink:0}
.gauge-bar{flex:1;height:6px;background:var(--border);border-radius:3px;overflow:hidden}
.gauge-fill{height:100%;border-radius:3px;transition:width 1s}
.gauge-sig{width:60px;font-size:10px;flex-shrink:0;text-align:right}
a{color:inherit;text-decoration:none}
</style>
</head>
<body>
<h1>ğŸ”® MACRO ORACLE DASHBOARD <span style="font-size:10px;color:var(--dim)">v4.0 Â· Standalone Â· No Server Needed</span></h1>
<div class="sub">
  <span><span class="dot loading" id="dot"></span><span id="ts">åŠ è½½ä¸­...</span> Â· 60sè‡ªåŠ¨åˆ·æ–°</span>
  <span id="conn"></span>
</div>
<div class="banner" id="banner"></div>

<div class="grid">

<!-- â”€â”€ æ ¸å¿ƒåˆ¤æ–­ â”€â”€ -->
<div class="card span2">
<div class="ct">ğŸ¯ æ ¸å¿ƒåˆ¤æ–­ + å®æ—¶ä»·æ ¼ <span class="src">å¤šæºèšåˆ | ç‚¹å‡»æ•°æ®æºè·³è½¬åŸå§‹é¡µé¢</span></div>
<table>
<tr><th>èµ„äº§</th><th>å®æ—¶ä»·æ ¼</th><th>å˜åŠ¨</th><th>æº</th><th>æ–¹å‘</th><th>ç½®ä¿¡åº¦</th><th>ç›®æ ‡</th><th>æ­¢æŸ</th></tr>
<tr><td class="v">S&P 500</td><td class="v" id="p-spx">â€”</td><td id="c-spx">â€”</td><td id="s-spx"></td><td class="nt">éœ‡è¡åå¼±</td><td>4/5</td><td>6,800-7,000</td><td>6,400</td></tr>
<tr><td class="v gl">BTC â­</td><td class="v" id="p-btc">â€”</td><td id="c-btc">â€”</td><td id="s-btc"></td><td class="nt">è­¦æˆ’å¼±åŠ¿</td><td>4/5</td><td>$85K-$100K</td><td>$58K</td></tr>
<tr><td class="v gl">é»„é‡‘ XAU</td><td class="v" id="p-gold">â€”</td><td id="c-gold">â€”</td><td id="s-gold"></td><td class="up">ç»“æ„ç‰›å¸‚</td><td>5/5</td><td>$5,200-$5,400</td><td>$4,700</td></tr>
<tr><td class="v">ç™½é“¶ XAG</td><td class="v" id="p-silver">â€”</td><td id="c-silver">â€”</td><td id="s-silver"></td><td class="up">BULL</td><td>3/5</td><td>$90-$95</td><td>$72</td></tr>
</table>
</div>

<!-- â”€â”€ å¸‚åœºå¿«ç…§ â”€â”€ -->
<div class="card">
<div class="ct">ğŸ“Š å¸‚åœºå¿«ç…§ <span class="src">Yahoo Finance Â· CoinGecko</span></div>
<table>
<tr><th>èµ„äº§</th><th>ä»·æ ¼</th><th>å˜åŠ¨</th><th>æº</th><th></th></tr>
<tr><td>S&P 500</td><td class="v" id="m-spx">â€”</td><td id="mc-spx">â€”</td><td id="ms-spx"></td><td id="mf-spx"></td></tr>
<tr><td>Nasdaq</td><td class="v" id="m-ndx">â€”</td><td id="mc-ndx">â€”</td><td id="ms-ndx"></td><td id="mf-ndx"></td></tr>
<tr><td>Dow</td><td class="v" id="m-dow">â€”</td><td id="mc-dow">â€”</td><td id="ms-dow"></td><td id="mf-dow"></td></tr>
<tr><td>BTC</td><td class="v" id="m-btc">â€”</td><td id="mc-btc">â€”</td><td id="ms-btc"></td><td id="mf-btc"></td></tr>
<tr><td>é»„é‡‘</td><td class="v" id="m-gold">â€”</td><td id="mc-gold">â€”</td><td id="ms-gold"></td><td id="mf-gold"></td></tr>
<tr><td>ç™½é“¶</td><td class="v" id="m-silver">â€”</td><td id="mc-silver">â€”</td><td id="ms-silver"></td><td id="mf-silver"></td></tr>
<tr><td>WTI</td><td class="v" id="m-wti">â€”</td><td id="mc-wti">â€”</td><td id="ms-wti"></td><td id="mf-wti"></td></tr>
<tr><td>DXY</td><td class="v" id="m-dxy">â€”</td><td id="mc-dxy">â€”</td><td id="ms-dxy"></td><td id="mf-dxy"></td></tr>
<tr><td>VIX</td><td class="v" id="m-vix">â€”</td><td id="mc-vix">â€”</td><td id="ms-vix"></td><td id="mf-vix"></td></tr>
</table>
</div>

<!-- â”€â”€ è¾¾åˆ©æ¬§å››è±¡é™ â”€â”€ -->
<div class="card">
<div class="ct">ğŸ“ å®è§‚åæ ‡</div>
<div class="qb">
  <div class="q-tl">æ»èƒ€åŒº<br>å¢é•¿â†“é€šèƒ€â†‘</div>
  <div class="q-tr">è¿‡çƒ­åŒº<br>å¢é•¿â†‘é€šèƒ€â†‘</div>
  <div class="q-bl">è¡°é€€åŒº<br>å¢é•¿â†“é€šèƒ€â†“</div>
  <div class="q-br">é‡‘å‘å¥³å­©<br>å¢é•¿â†‘é€šèƒ€â†“</div>
</div>
<div style="background:rgba(255,71,87,.1);border:1px solid rgba(255,71,87,.4);border-radius:5px;padding:6px;font-size:10px;margin-top:4px">
  <span style="color:var(--red);font-weight:700">â—‰ å½“å‰ï¼šæ»èƒ€-LiteåŒºé—´</span><br>
  <span style="color:var(--dim)">GDP +1.4%ï¼ˆé¢„æœŸ3.0%ï¼‰| Core PCE 3.0% YoY<br>Supercore MoM +0.6% | J.P. Morganï¼š2026é›¶é™æ¯<br>Dalio Stage 6 å®£è¨€ï¼ˆFeb 17ï¼‰| "Sell America"å™äº‹</span>
</div>
<div style="margin-top:6px;font-size:10px">
  <span class="sig sr">æ»èƒ€è±¡é™ç¡®è®¤</span>
  <span style="color:var(--dim);margin-left:8px">ç½®ä¿¡åº¦ 4/5</span>
</div>
</div>

<!-- â”€â”€ åˆ©ç‡ â”€â”€ -->
<div class="card">
<div class="ct">ğŸ¦ åˆ©ç‡ <span class="src">FRED + Yahoo Finance</span></div>
<table>
<tr><th>æŒ‡æ ‡</th><th>å€¼</th><th>ä¿¡å·</th><th>æº</th><th></th></tr>
<tr><td>Fed Funds</td><td class="v" id="r-ffr">â€”</td><td><span class="sig sy">æš‚åœæœŸ</span></td><td id="rs-ffr"></td><td id="rf-ffr"></td></tr>
<tr><td>2Y UST</td><td class="v" id="r-2y">â€”</td><td id="r-2y-s">â€”</td><td id="rs-2y"></td><td id="rf-2y"></td></tr>
<tr><td>10Y UST</td><td class="v" id="r-10y">â€”</td><td id="r-10y-s">â€”</td><td id="rs-10y"></td><td id="rf-10y"></td></tr>
<tr><td>30Y UST</td><td class="v" id="r-30y">â€”</td><td>â€”</td><td id="rs-30y"></td><td id="rf-30y"></td></tr>
<tr><td>2s10såˆ©å·®</td><td class="v" id="r-sp">â€”</td><td id="r-sp-s">â€”</td><td id="rs-sp"></td><td id="rf-sp"></td></tr>
<tr><td>5Y BEI</td><td class="v" id="r-bei">â€”</td><td>é€šèƒ€é¢„æœŸ</td><td id="rs-bei"></td><td id="rf-bei"></td></tr>
<tr><td>10Y TIPS</td><td class="v" id="r-tips">â€”</td><td>å®é™…åˆ©ç‡</td><td id="rs-tips"></td><td id="rf-tips"></td></tr>
</table>
</div>

<!-- â”€â”€ ä¿¡ç”¨ â”€â”€ -->
<div class="card">
<div class="ct">ğŸ›¡ï¸ ä¿¡ç”¨ & æ³¢åŠ¨ç‡ <span class="src">FRED + Yahoo</span></div>
<table>
<tr><th>æŒ‡æ ‡</th><th>å€¼</th><th>ä¿¡å·</th><th>æº</th><th></th></tr>
<tr><td>HYåˆ©å·®</td><td class="v" id="cr-hy">â€”</td><td id="cr-hy-s">â€”</td><td id="crs-hy"></td><td id="crf-hy"></td></tr>
<tr><td>IGåˆ©å·®</td><td class="v" id="cr-ig">â€”</td><td id="cr-ig-s">â€”</td><td id="crs-ig"></td><td id="crf-ig"></td></tr>
<tr><td>VIX</td><td class="v" id="cr-vix">â€”</td><td id="cr-vix-s">â€”</td><td id="crs-vix"></td><td id="crf-vix"></td></tr>
</table>
<div style="margin-top:6px">
<div style="font-size:10px;color:var(--dim)">ç³»ç»Ÿæ€§é£é™©è¯„åˆ†</div>
<div class="meter"><div class="meter-fill" id="risk-m" style="width:15%;background:var(--green)"></div></div>
<div style="font-size:11px;text-align:center;font-weight:700" id="risk-s">ä½é£é™©</div>
</div>
<div style="margin-top:6px;font-size:10px;color:var(--dim);background:rgba(255,159,67,.06);border:1px solid rgba(255,159,67,.2);border-radius:4px;padding:5px">
  âš ï¸ Marks/Pozsarï¼š"æŒ‡æ•°åœ¨æ’’è°" â€” ç»¼åˆåˆ©å·®å¹³é™ä½†<br>ä¸ªåˆ¸çˆ†ç ´ã€‚AIæ›¿ä»£å¼•å‘ç»“æ„æ€§ä¿¡ç”¨æŸå¤±ã€‚
</div>
</div>

<!-- â”€â”€ æµåŠ¨æ€§ â”€â”€ -->
<div class="card">
<div class="ct">ğŸ’§ æµåŠ¨æ€§ <span class="src">FRED</span></div>
<table>
<tr><th>æŒ‡æ ‡</th><th>å€¼</th><th>ä¿¡å·</th><th>æº</th><th></th></tr>
<tr><td>Fedèµ„äº§è´Ÿå€ºè¡¨</td><td class="v" id="l-bs">â€”</td><td class="dn">QTæŒç»­</td><td id="ls-bs"></td><td id="lf-bs"></td></tr>
</table>
<div style="margin-top:6px;font-size:10px;color:var(--dim)">æµåŠ¨æ€§ç»¼åˆè¯„åˆ†</div>
<div class="meter"><div class="meter-fill" style="width:40%;background:var(--orange)"></div></div>
<div style="font-size:10px;text-align:center;color:var(--orange);font-weight:700;margin-bottom:6px">ä¸­æ€§åç´§ (40/100)</div>
<table style="margin-top:4px">
<tr><th>åˆ†é¡¹</th><th>çŠ¶æ€</th><th>æ–¹å‘</th></tr>
<tr><td>Fed QT</td><td class="dn">$25B/æœˆç¼©è¡¨</td><td class="dn">â†“ ç´§</td></tr>
<tr><td>è´¢æ”¿æµåŠ¨æ€§</td><td class="nt">2æœˆæœ«æ”¯æ’‘</td><td class="nt">â†’ ä¸­æ€§</td></tr>
<tr><td>3æœˆæµåŠ¨æ€§</td><td class="dn">è¾¹é™…æ”¶ç´§é¢„æœŸ</td><td class="dn">â†“ è­¦æƒ•</td></tr>
</table>
</div>

<!-- â”€â”€ BTC é“¾ä¸Šæ·±åº¦ â”€â”€ -->
<div class="card">
<div class="ct">â›“ï¸ BTC é“¾ä¸Šæ·±åº¦ <span class="src">CoinGecko Â· bgeometrics Â· Alt.me</span></div>
<div style="display:flex;gap:10px;margin-bottom:8px">
  <div style="flex:1;text-align:center;background:rgba(77,166,255,.08);border:1px solid rgba(77,166,255,.2);border-radius:5px;padding:6px">
    <div style="font-size:10px;color:var(--dim)">BTC ä»·æ ¼</div>
    <div class="v" id="b-price" style="font-size:16px">â€”</div>
    <div id="b-ch24" style="font-size:11px">â€”</div>
  </div>
  <div style="flex:1;text-align:center;background:rgba(255,159,67,.06);border:1px solid rgba(255,159,67,.2);border-radius:5px;padding:6px">
    <div style="font-size:10px;color:var(--dim)">æè´ªæŒ‡æ•°</div>
    <div class="v" id="b-fg-val" style="font-size:16px">â€”</div>
    <div id="b-fg-lab" style="font-size:10px;color:var(--dim)">â€”</div>
  </div>
  <div style="flex:1;text-align:center;background:rgba(0,214,143,.06);border:1px solid rgba(0,214,143,.2);border-radius:5px;padding:6px">
    <div style="font-size:10px;color:var(--dim)">å·²å®ç°ä»·æ ¼</div>
    <div class="v gl" id="b-rp" style="font-size:14px">â€”</div>
    <div id="b-rp-sub" style="font-size:10px;color:var(--dim)">ä¼°å€¼æ”¯æ’‘</div>
  </div>
</div>
<div style="font-size:10px;color:var(--dim);margin-bottom:4px;font-weight:700">ğŸ“Š é“¾ä¸Šä¼°å€¼ä¿¡å·ï¼ˆbgeometricsï¼‰</div>
<div class="gauge-row">
  <div class="gauge-label">MVRV Z-Score</div>
  <div class="gauge-val" id="oc-mvrv">â€”</div>
  <div class="gauge-bar"><div class="gauge-fill" id="oc-mvrv-b" style="width:0%"></div></div>
  <div class="gauge-sig" id="oc-mvrv-s">â€”</div>
</div>
<div class="gauge-row">
  <div class="gauge-label">SOPR</div>
  <div class="gauge-val" id="oc-sopr">â€”</div>
  <div class="gauge-bar"><div class="gauge-fill" id="oc-sopr-b" style="width:0%"></div></div>
  <div class="gauge-sig" id="oc-sopr-s">â€”</div>
</div>
<div class="gauge-row">
  <div class="gauge-label">NUPL</div>
  <div class="gauge-val" id="oc-nupl">â€”</div>
  <div class="gauge-bar"><div class="gauge-fill" id="oc-nupl-b" style="width:0%"></div></div>
  <div class="gauge-sig" id="oc-nupl-s">â€”</div>
</div>
<div class="gauge-row">
  <div class="gauge-label">Puell Multiple</div>
  <div class="gauge-val" id="oc-puell">â€”</div>
  <div class="gauge-bar"><div class="gauge-fill" id="oc-puell-b" style="width:0%"></div></div>
  <div class="gauge-sig" id="oc-puell-s">â€”</div>
</div>
<div class="gauge-row">
  <div class="gauge-label">æ´»è·ƒåœ°å€æ•°</div>
  <div class="gauge-val" id="oc-addr">â€”</div>
  <div class="gauge-bar"><div class="gauge-fill" id="oc-addr-b" style="width:50%;background:var(--blue)"></div></div>
  <div class="gauge-sig" id="oc-addr-s">â€”</div>
</div>
<div style="margin-top:6px;font-size:10px;color:var(--dim)">é“¾ä¸Šç»¼åˆè¯„åˆ†</div>
<div class="meter"><div class="meter-fill" id="oc-total-m" style="width:0%"></div></div>
<div style="font-size:11px;text-align:center;font-weight:700" id="oc-total-s">è®¡ç®—ä¸­...</div>
</div>

<!-- â”€â”€ è´µé‡‘å± â”€â”€ -->
<div class="card">
<div class="ct">ğŸ¥‡ è´µé‡‘å± <span class="src">Yahoo Finance</span></div>
<table>
<tr><th>æŒ‡æ ‡</th><th>å€¼</th><th>ä¿¡å·</th><th>æº</th><th></th></tr>
<tr><td>é»„é‡‘</td><td class="v gl" id="pm-g">â€”</td><td id="pm-g-s">â€”</td><td id="pms-g"></td><td id="pmf-g"></td></tr>
<tr><td>ç™½é“¶</td><td class="v gl" id="pm-s">â€”</td><td id="pm-s-s">â€”</td><td id="pms-s"></td><td id="pmf-s"></td></tr>
<tr><td>G/S Ratio</td><td class="v" id="pm-r">â€”</td><td id="pm-r-s">â€”</td></tr>
<tr><td>10Y TIPS</td><td class="v" id="pm-t">â€”</td><td>å®é™…åˆ©ç‡ï¼ˆé»„é‡‘æ ¸å¿ƒé©±åŠ¨ï¼‰</td></tr>
<tr><td>å¤®è¡Œè´­é‡‘</td><td class="v up">863å¨/å¹´</td><td>ç»“æ„æ€§éœ€æ±‚</td><td><a href="https://www.gold.org/goldhub/data/gold-demand-by-country" target="_blank" class="src-tag sp">WGC</a></td><td><span class="fb stale">å­£åº¦</span></td></tr>
</table>
<div style="margin-top:6px;background:rgba(255,215,0,.07);border:1px solid rgba(255,215,0,.25);border-radius:5px;padding:6px;font-size:10px">
  <span style="color:var(--gold);font-weight:700">ğŸ† Dalio Stage 6 é»„é‡‘é€»è¾‘</span><br>
  <span style="color:var(--dim)">æ»èƒ€è±¡é™ + å¤®è¡Œè´­é‡‘ + "Sell America" = é»„é‡‘ç»“æ„ç‰›å¸‚<br>å†å²é¦–ç ´ $5,000 Â· æŠ€æœ¯å›è°ƒæ˜¯é€¢ä½åŠ ä»“æœºä¼š</span>
</div>
</div>

<!-- â”€â”€ å®è§‚æ—¥å† â”€â”€ -->
<div class="card">
<div class="ct">ğŸ“… å®è§‚æ—¥å† <span class="src">å…³é”®äº‹ä»¶ | çº¢=é«˜å½±å“ æ©™=ä¸­ è“=ä½</span></div>
<div id="cal-container"></div>
</div>

<!-- â”€â”€ å®è§‚è§‚ç‚¹ â”€â”€ -->
<div class="card span2">
<div class="ct">ğŸ§  é¡¶çº§åˆ†æå¸ˆè§‚ç‚¹ <span class="src">æœ€æ–° 13F / ç ”æŠ¥ / å…¬å¼€å‘è¨€</span></div>
<div style="display:grid;grid-template-columns:1fr 1fr;gap:0">
<div style="padding-right:12px;border-right:1px solid var(--border)">
<div class="analyst-card">
  <div><span class="analyst-name">Ray Dalio</span><span class="analyst-date">Feb 17, 2026 Â· æ…•å°¼é»‘å®‰å…¨å³°ä¼š</span></div>
  <div class="analyst-view">æ­£å¼å®£å¸ƒç¾å›½è¿›å…¥å¤§å‘¨æœŸ <strong style="color:var(--red)">Stage 6</strong>ï¼ˆç§©åºå´©è§£æœŸï¼‰ï¼Œç±»æ¯”1930å¹´ä»£"å¤§æ— åº"ã€‚"The World Order Has Broken Down."</div>
  <div class="analyst-signal"><span class="sig sg">é»„é‡‘/éç¾èµ„äº§</span> <span class="sig sr">ç¾å€º/ç¾å…ƒ</span> <span style="color:var(--dim);font-size:10px;margin-left:6px">ç½®ä¿¡åº¦ 4/5</span></div>
</div>
<div class="analyst-card">
  <div><span class="analyst-name">Stanley Druckenmiller</span><span class="analyst-date">Q4 2025 13F</span></div>
  <div class="analyst-view">æ¸…ä»“ Meta/Arm/Sandisk/Seagate â†’ è½¬ä»“ Amazon/Alphabetã€‚æ–°å»º <strong style="color:var(--orange)">$6,400ä¸‡ Bloom Energy</strong>ï¼ˆBEï¼‰å¤šå¤´ã€‚AIåŸºç¡€è®¾æ–½ç“¶é¢ˆï¼šç®—åŠ›â†’<strong>ç”µåŠ›</strong>ã€‚</div>
  <div class="analyst-signal"><span class="sig sg">AIèƒ½æº/åº”ç”¨å±‚</span> <span class="sig sr">AIèŠ¯ç‰‡é«˜ä¼°å€¼</span> <span style="color:var(--dim);font-size:10px;margin-left:6px">ç½®ä¿¡åº¦ 4/5</span></div>
</div>
</div>
<div style="padding-left:12px">
<div class="analyst-card">
  <div><span class="analyst-name">Bill Ackman</span><span class="analyst-date">Q4 2025 13F</span></div>
  <div class="analyst-view">Mag 7æ ¸å¿ƒä»“ä½å¢65%ï¼ˆæŒä»“$22äº¿ï¼Œå‡è‡³ç¬¬ä¸‰å¤§é‡ä»“ï¼‰ã€‚ä¸Druckenmillerå…±è¯†ï¼š<strong>AIæ ¸å¿ƒåŸºç¡€è®¾æ–½+èƒ½æºåŒè½¨é…ç½®</strong>ã€‚å·´è¥¿R$330äº¿å¤–èµ„æ¶Œå…¥ï¼ŒEWZ YTD +20%ã€‚</div>
  <div class="analyst-signal"><span class="sig sg">éç¾èµ„äº§/AIåº”ç”¨</span> <span style="color:var(--dim);font-size:10px;margin-left:6px">ç½®ä¿¡åº¦ 3/5</span></div>
</div>
<div class="analyst-card">
  <div><span class="analyst-name">Howard Marks / Zoltan Pozsar</span><span class="analyst-date">Feb 2026</span></div>
  <div class="analyst-view">"Is It a Bubble?" â€” AIæŠ•èµ„å¤„äºFOMOå°¾éƒ¨ï¼Œç±»æ¯”é“è·¯æ³¡æ²«ã€‚ä¿¡ç”¨å¸‚åœº"<strong style="color:var(--orange)">æŒ‡æ•°åœ¨æ’’è°</strong>"ï¼šç»¼åˆåˆ©å·®å¹³é™ï¼Œä¸ªåˆ¸çˆ†ç ´â€”â€”å•†ä¸šæ¨¡å¼è¢«AIæ›¿ä»£å¼•å‘ç»“æ„æ€§ä¿¡ç”¨æŸå¤±ã€‚</div>
  <div class="analyst-signal"><span class="sig sy">AIä¼°å€¼è°¨æ…</span> <span class="sig sr">ä¿¡ç”¨å¸‚åœºç»“æ„é£é™©</span> <span style="color:var(--dim);font-size:10px;margin-left:6px">ç½®ä¿¡åº¦ 3/5</span></div>
</div>
</div>
</div>
</div>

<!-- â”€â”€ å®æ—¶å‘Šè­¦ â”€â”€ -->
<div class="card span2">
<div class="ct">âš¡ å®æ—¶å‘Šè­¦ & æœºä¼šæ‰«æ</div>
<div id="alerts-c"><div style="color:var(--dim);font-size:11px">åŠ è½½ä¸­...</div></div>
</div>

<!-- â”€â”€ Kill Switch â”€â”€ -->
<div class="card">
<div class="ct">ğŸš¨ Kill Switch</div>
<table>
<tr><th>è§¦å‘æ¡ä»¶</th><th>è¡ŒåŠ¨</th><th>çŠ¶æ€</th></tr>
<tr><td class="dn">BTC &lt; $58,000</td><td>â†’ åˆ¤æ–­å¤±æ•ˆ</td><td id="ks-btc">â€”</td></tr>
<tr><td class="dn">HYåˆ©å·® &gt; 400bp</td><td>â†’ è½¬ä¸ºé˜²å¾¡</td><td id="ks-hy">â€”</td></tr>
<tr><td class="dn">VIX &gt; 35</td><td>â†’ ç³»ç»Ÿæ€§é£é™©</td><td id="ks-vix">â€”</td></tr>
<tr><td class="dn">DXY &gt; 105</td><td>â†’ æµåŠ¨æ€§å±æœº</td><td id="ks-dxy">â€”</td></tr>
<tr><td class="dn">æ ¸å¿ƒCPI MoM &gt; 0.4%</td><td>â†’ å…¨é¢å‡ä»“</td><td id="ks-cpi" class="dn">ä¸‹æ¬¡: Mar 11</td></tr>
</table>
</div>

<!-- â”€â”€ æ•°æ®è´¨é‡ â”€â”€ -->
<div class="card">
<div class="ct">ğŸ” æ•°æ®è´¨é‡</div>
<div id="val-c"><div style="color:var(--dim);font-size:11px">ç­‰å¾…æ ¡éªŒ...</div></div>
</div>

</div><!-- /grid -->

<div style="text-align:center;color:var(--dim);font-size:10px;margin-top:8px">
  Macro Oracle v4.0 | Yahoo Finance Â· FRED Â· CoinGecko Â· bgeometrics Â· Alternative.me | <span id="src-count"></span>
</div>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
     JAVASCRIPT
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<script>
// â”€â”€â”€ é…ç½® â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
const FRED_KEY   = '4b63504ba634719bd7d6b678c8b996b8';
const PROXY      = 'https://corsproxy.io/?url=';
const YAHOO_BASE = 'https://query1.finance.yahoo.com/v8/finance/chart/';
const BG_BASE    = 'https://bitcoin-data.com/v1/';
const REFRESH_MS = 60000;
const FRED_DELAY = 300; // ms between each FRED request to avoid rate-limiting

// â”€â”€â”€ æ•°æ®æºå®šä¹‰ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
const SRC = {
  yahoo:     { name:'Yahoo',      url:'https://finance.yahoo.com' },
  coingecko: { name:'CoinGecko',  url:'https://coingecko.com/en/coins/bitcoin' },
  altme:     { name:'Alt.me',     url:'https://alternative.me/crypto/fear-and-greed-index/' },
  fred:      { name:'FRED',       url:'https://fred.stlouisfed.org' },
  bgeom:     { name:'bgeometrics',url:'https://charts.bgeometrics.com' },
};

// â”€â”€â”€ å·¥å…·å‡½æ•° â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
const fmt  = (n,d=2) => n!=null ? Number(n).toLocaleString('en-US',{minimumFractionDigits:d,maximumFractionDigits:d}) : 'â€”';
const chg  = (c,p)  => {if(!c||!p)return{t:'â€”',cl:'dm'};const r=((c-p)/p*100);return{t:(r>=0?'+':'')+r.toFixed(2)+'%',cl:r>=0?'up':'dn'};};
const sv   = (id,v,cls) => {const e=document.getElementById(id);if(!e)return;e.textContent=v;if(cls)e.className='v '+cls;};
const sh   = (id,h)     => {const e=document.getElementById(id);if(e)e.innerHTML=h;};
const safe = r => r.status==='fulfilled'?r.value:null;
const delay= ms => new Promise(r=>setTimeout(r,ms));

function stag(s){return `<a href="${s.url}" target="_blank" class="src-tag sp">${s.name}</a>`;}
function fbadge(dateStr,isRt){
  if(!dateStr)return '<span class="fb stale">â€”</span>';
  const d=new Date(dateStr),now=new Date(),diffH=(now-d)/3600000;
  if(isRt)return diffH<24?'<span class="fb ok">å®æ—¶</span>':`<span class="fb stale">â³${Math.floor(diffH/24)}d</span>`;
  return diffH<50?`<span class="fb ok">${dateStr.slice(5)}</span>`:`<span class="fb stale">â³${Math.floor(diffH/24)}d</span>`;
}

// â”€â”€â”€ Fetch: Yahoo Finance (ç›´è¿â†’ä»£ç†) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
async function fetchYahoo(symbol) {
  const url = `${YAHOO_BASE}${encodeURIComponent(symbol)}?interval=1d&range=2d`;
  const parse = d => {
    const m = d?.chart?.result?.[0]?.meta;
    if(!m?.regularMarketPrice)throw new Error('no price');
    return{price:m.regularMarketPrice,prev_close:m.previousClose??m.chartPreviousClose??null};
  };
  try{const r=await fetch(url,{signal:AbortSignal.timeout(6000)});if(r.ok)return parse(await r.json());}catch{}
  try{const r=await fetch(PROXY+encodeURIComponent(url),{signal:AbortSignal.timeout(10000)});if(r.ok)return parse(await r.json());}catch{}
  const r=await fetch(`https://api.allorigins.win/raw?url=${encodeURIComponent(url)}`,{signal:AbortSignal.timeout(10000)});
  return parse(await r.json());
}

// â”€â”€â”€ Fetch: FRED (CORSä»£ç† + ä¸²è¡Œé—´éš”300ms) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
// FRED API ä¸æ”¯æŒ CORSï¼Œæµè§ˆå™¨å¿…é¡»èµ°ä»£ç†
async function fetchFred(seriesId) {
  const raw=`https://api.stlouisfed.org/fred/series/observations?series_id=${seriesId}&api_key=${FRED_KEY}&file_type=json&sort_order=desc&limit=1`;
  const parse = async r => {
    if(!r.ok)throw new Error(`FRED ${seriesId} HTTP ${r.status}`);
    const d=await r.json();
    const obs=d.observations?.[0];
    if(!obs)throw new Error(`FRED no obs`);
    return{value:obs.value==='.'?null:parseFloat(obs.value),date:obs.date};
  };
  // 1. ç›´è¿å°è¯•ï¼ˆæŸäº›æµè§ˆå™¨/ç½‘ç»œå¯èƒ½æ”¯æŒï¼‰
  try{const r=await fetch(raw,{signal:AbortSignal.timeout(5000)});if(r.ok){const d=await r.json();const obs=d.observations?.[0];if(obs)return{value:obs.value==='.'?null:parseFloat(obs.value),date:obs.date};}}catch{}
  // 2. corsproxy.io
  try{return await parse(await fetch(PROXY+encodeURIComponent(raw),{signal:AbortSignal.timeout(10000)}));}catch{}
  // 3. allorigins fallback
  return await parse(await fetch(`https://api.allorigins.win/raw?url=${encodeURIComponent(raw)}`,{signal:AbortSignal.timeout(10000)}));
}

async function fetchFredSeq(ids) {
  const results={};
  for(const id of ids){
    await delay(FRED_DELAY);
    try{results[id]=await fetchFred(id);}catch{results[id]=null;}
  }
  return results;
}

// â”€â”€â”€ Fetch: CoinGecko (BTC) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
async function fetchBTC() {
  const r=await fetch('https://api.coingecko.com/api/v3/simple/price?ids=bitcoin&vs_currencies=usd&include_24hr_change=true&include_market_cap=true',{signal:AbortSignal.timeout(10000)});
  const d=await r.json();const b=d.bitcoin;
  return{price:b.usd,change_24h:parseFloat((b.usd_24h_change||0).toFixed(2)),market_cap:b.usd_market_cap};
}

// â”€â”€â”€ Fetch: Alternative.me (F&G) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
async function fetchFG() {
  const r=await fetch('https://api.alternative.me/fng/?limit=1',{signal:AbortSignal.timeout(8000)});
  const d=await r.json();const i=d.data[0];
  return{value:parseInt(i.value),label:i.value_classification,timestamp:i.timestamp};
}

// â”€â”€â”€ Fetch: bgeometrics (ä¸²è¡Œ) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
async function fetchBG(endpoint) {
  const r=await fetch(BG_BASE+endpoint,{signal:AbortSignal.timeout(10000)});
  if(!r.ok)throw new Error(`BG ${endpoint} HTTP ${r.status}`);
  const d=await r.json();
  return Array.isArray(d)?d[d.length-1]:d;
}

async function fetchBGSeq() {
  const results={};
  const eps={mvrv:'mvrv-zscore',sopr:'sopr',nupl:'nupl',puell:'puell-multiple',addr:'active-addresses',rp:'realized-price'};
  for(const[key,ep] of Object.entries(eps)){
    await delay(200);
    try{results[key]=await fetchBG(ep);}catch{results[key]=null;}
  }
  return results;
}

// â”€â”€â”€ å®è§‚æ—¥å† â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
const MACRO_CALENDAR = [
  {date:'2026-02-26',label:'PCE/Core PCE Jan',desc:'æ»èƒ€å…³é”®éªŒè¯ | ä¸Šæ¬¡Core 3.0%ï¼Œè¶…é¢„æœŸ',impact:'high',ref:'https://fred.stlouisfed.org/series/PCEPI'},
  {date:'2026-03-07',label:'NFP å°±ä¸šæŠ¥å‘Š',desc:'é¢„æœŸ +130KÂ±50K | AHEåŒæ¯”æ˜¯é€šèƒ€åé—¨',impact:'high',ref:'https://www.bls.gov/news.release/empsit.nr0.htm'},
  {date:'2026-03-11',label:'CPI Feb 2026',desc:'å‰å€¼ Core CPI 2.5% YoY | 0.3%ä»¥ä¸Š=å†é€šèƒ€è­¦æŠ¥',impact:'high',ref:'https://www.bls.gov/news.release/cpi.nr0.htm'},
  {date:'2026-03-18',label:'FOMC ä¼šè®®ï¼ˆ1/2å¤©ï¼‰',desc:'CME FedWatchï¼š99%æš‚åœ | å…³æ³¨dot plotä¿®æ­£',impact:'high',ref:'https://www.federalreserve.gov/monetarypolicy/fomccalendars.htm'},
  {date:'2026-03-19',label:'FOMC å†³è®® + å‘å¸ƒä¼š',desc:'æš‚åœé™æ¯æ¦‚ç‡æé«˜ | å…³æ³¨2026 dot plot',impact:'high',ref:'https://www.federalreserve.gov/monetarypolicy/fomccalendars.htm'},
  {date:'2026-03-27',label:'GDP Q4 2025 ç»ˆå€¼',desc:'åˆå€¼ +1.4%ï¼ˆå¤§å¹…ä½äºé¢„æœŸ3.0%ï¼‰',impact:'med',ref:'https://fred.stlouisfed.org/series/GDPC1'},
  {date:'2026-04-04',label:'NFP 3æœˆå°±ä¸šæŠ¥å‘Š',desc:'å…³ç¨å†²å‡»æ˜¯å¦ä¼ å¯¼åˆ°å°±ä¸š',impact:'high',ref:'https://www.bls.gov/news.release/empsit.nr0.htm'},
  {date:'2026-04-10',label:'CPI Mar 2026',desc:'å…³é”®ï¼šå…³ç¨å½±å“æ˜¯å¦è¿›å…¥é€šèƒ€æ•°æ®',impact:'high',ref:'https://www.bls.gov/news.release/cpi.nr0.htm'},
  {date:'2026-05-06',label:'FOMC ä¼šè®®',desc:'2026å¹´ç¬¬ä¸‰æ¬¡ä¼šè®® | å…³ç¨å½±å“è¯„ä¼°',impact:'med',ref:'https://www.federalreserve.gov/monetarypolicy/fomccalendars.htm'},
];

function renderCalendar(){
  const today=new Date();today.setHours(0,0,0,0);
  let html='';
  let shown=0;
  for(const ev of MACRO_CALENDAR){
    if(shown>=7)break;
    const d=new Date(ev.date+'T00:00:00');
    const diff=Math.round((d-today)/(86400000));
    let cls='future',label='';
    if(diff<0){cls='past';label=`${Math.abs(diff)}å¤©å‰`;}
    else if(diff===0){cls='today';label='ä»Šå¤©';}
    else if(diff<=3){cls='soon';label=`${diff}å¤©å`;}
    else{label=`${diff}å¤©å`;}
    if(diff<-7){continue;}
    shown++;
    const bd=ev.impact==='high'?'cb-high':ev.impact==='med'?'cb-med':'cb-low';
    html+=`<div class="cal-item">
      <div class="cal-date ${cls}">${ev.date.slice(5)}<br><span style="font-size:9px">${label}</span></div>
      <div class="cal-body">
        <div class="cal-title"><a href="${ev.ref}" target="_blank">${ev.label}</a><span class="cal-badge ${bd}">${ev.impact==='high'?'é«˜å½±å“':ev.impact==='med'?'ä¸­å½±å“':'ä½å½±å“'}</span></div>
        <div class="cal-desc">${ev.desc}</div>
      </div>
    </div>`;
  }
  sh('cal-container',html||'<div style="color:var(--dim);font-size:11px">æš‚æ— è¿‘æœŸäº‹ä»¶</div>');
}

// â”€â”€â”€ ä¸»æ•°æ®èšåˆ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
async function fetchAll(){
  const now=new Date().toISOString();
  // Yahoo + BTC + FG å¹¶è¡Œï¼ˆæ— é™é€Ÿé—®é¢˜ï¼‰
  const [p_spx,p_ndx,p_dow,p_vix,p_gold,p_silver,p_wti,p_dxy,p_tnx,p_tyx,p_btc,p_fg]=await Promise.allSettled([
    fetchYahoo('^GSPC'),fetchYahoo('^IXIC'),fetchYahoo('^DJI'),fetchYahoo('^VIX'),
    fetchYahoo('GC=F'),fetchYahoo('SI=F'),fetchYahoo('CL=F'),fetchYahoo('DX-Y.NYB'),
    fetchYahoo('^TNX'),fetchYahoo('^TYX'),fetchBTC(),fetchFG()
  ]);
  // FRED ä¸²è¡Œï¼ˆè§£å†³å¹¶å‘é™é€Ÿï¼‰
  const fred=await fetchFredSeq(['DFF','DGS2','DGS10','T10Y2Y','BAMLH0A0HYM2','BAMLC0A4CBBB','DFII10','T5YIE','WALCL']);
  // bgeometrics ä¸²è¡Œ
  const bg=await fetchBGSeq();

  const spx=safe(p_spx),ndx=safe(p_ndx),dow=safe(p_dow),vix=safe(p_vix),
        gold=safe(p_gold),silver=safe(p_silver),wti=safe(p_wti),dxy=safe(p_dxy),
        tnx=safe(p_tnx),tyx=safe(p_tyx),btc=safe(p_btc),fg=safe(p_fg);

  const errs=[p_spx,p_ndx,p_dow,p_vix,p_gold,p_silver,p_wti,p_dxy,p_tnx,p_tyx,p_btc,p_fg]
    .filter(r=>r.status==='rejected').length
    + Object.values(fred).filter(v=>v===null).length
    + Object.values(bg).filter(v=>v===null).length;

  return{spx,ndx,dow,vix,gold,silver,wti,dxy,tnx,tyx,btc,fg,fred,bg,now,errs};
}

// â”€â”€â”€ æ¸²æŸ“ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function render(d){
  const{spx,ndx,dow,vix,gold,silver,wti,dxy,tnx,tyx,btc,fg,fred,bg,now,errs}=d;
  document.getElementById('ts').textContent=new Date(now).toLocaleString('zh-CN');
  document.getElementById('dot').className=errs>10?'dot err':'dot ok';
  sh('src-count',`FREDä¸²è¡ŒÂ·Yahooå¹¶è¡ŒÂ·bgeometricsé“¾ä¸Š | å¤±è´¥è¯·æ±‚: ${errs}`);

  // â”€â”€ Market Snapshot â”€â”€
  const snap=[
    [spx,'spx','m-spx','^GSPC'],[ndx,'ndx','m-ndx','^IXIC'],[dow,'dow','m-dow','^DJI'],
    [gold,'gold','m-gold','GC=F'],[silver,'silver','m-silver','SI=F'],[wti,'wti','m-wti','CL=F'],
  ];
  snap.forEach(([o,key,pid])=>{
    if(!o?.price)return;
    const c=chg(o.price,o.prev_close);
    sv(pid,key==='spx'||key==='ndx'||key==='dow'?fmt(o.price):('$'+fmt(o.price)),c.cl);
    sh('mc-'+key,`<span class="${c.cl}">${c.t}</span>`);
    sh('ms-'+key,stag(SRC.yahoo));
    sh('mf-'+key,fbadge(now,true));
  });
  if(btc?.price){
    const c24=btc.change_24h,cl=c24>=0?'up':'dn';
    sv('m-btc','$'+fmt(btc.price),cl);
    sh('mc-btc',`<span class="${cl}">${c24>=0?'+':''}${fmt(c24)}%</span>`);
    sh('ms-btc',stag(SRC.coingecko)); sh('mf-btc',fbadge(now,true));
  }
  if(dxy?.price){sv('m-dxy',fmt(dxy.price));sh('mc-dxy','ICE DXY');sh('ms-dxy',stag(SRC.yahoo));sh('mf-dxy',fbadge(now,true));}
  if(vix?.price){
    const v=vix.price;
    sv('m-vix',fmt(v),v>25?'dn':v>20?'nt':'up');
    sh('mc-vix',v<20?'ä½æ³¢åŠ¨':v<25?'ä¸­æ€§':'é«˜æ³¢åŠ¨');
    sh('ms-vix',stag(SRC.yahoo)); sh('mf-vix',fbadge(now,true));
  }

  // â”€â”€ æ ¸å¿ƒåˆ¤æ–­ top panel â”€â”€
  if(spx?.price){const c=chg(spx.price,spx.prev_close);sv('p-spx',fmt(spx.price),c.cl);sh('c-spx',`<span class="${c.cl}">${c.t}</span>`);sh('s-spx',stag(SRC.yahoo));}
  if(btc?.price){const c24=btc.change_24h,cl=c24>=0?'up':'dn';sv('p-btc','$'+fmt(btc.price),cl);sh('c-btc',`<span class="${cl}">${c24>=0?'+':''}${fmt(c24)}%</span>`);sh('s-btc',stag(SRC.coingecko));}
  if(gold?.price){const c=chg(gold.price,gold.prev_close);sv('p-gold','$'+fmt(gold.price),c.cl);sh('c-gold',`<span class="${c.cl}">${c.t}</span>`);sh('s-gold',stag(SRC.yahoo));}
  if(silver?.price){const c=chg(silver.price,silver.prev_close);sv('p-silver','$'+fmt(silver.price),c.cl);sh('c-silver',`<span class="${c.cl}">${c.t}</span>`);sh('s-silver',stag(SRC.yahoo));}

  // â”€â”€ è´µé‡‘å±å¡ â”€â”€
  if(gold?.price){const c=chg(gold.price,gold.prev_close);sv('pm-g','$'+fmt(gold.price),'gl');sh('pm-g-s',`<span class="${c.cl}">${c.t}</span>`);sh('pms-g',stag(SRC.yahoo));sh('pmf-g',fbadge(now,true));}
  if(silver?.price){const c=chg(silver.price,silver.prev_close);sv('pm-s','$'+fmt(silver.price),'gl');sh('pm-s-s',`<span class="${c.cl}">${c.t}</span>`);sh('pms-s',stag(SRC.yahoo));sh('pmf-s',fbadge(now,true));}
  if(gold?.price&&silver?.price&&silver.price>0){
    const r=gold.price/silver.price;sv('pm-r',fmt(r,1)+'x');
    sh('pm-r-s',r>90?'<span class="sig sg">é“¶ä½ä¼°</span>':r<70?'<span class="sig sr">é‡‘ä½ä¼°</span>':'<span class="sig sy">ä¸­æ€§</span>');
  }

  // â”€â”€ åˆ©ç‡ â”€â”€
  if(fred.DFF?.value!=null){sv('r-ffr',fred.DFF.value+'%');sh('rs-ffr',stag(SRC.fred));sh('rf-ffr',fbadge(fred.DFF.date,false));}
  if(fred.DGS2?.value!=null){sv('r-2y',fmt(fred.DGS2.value)+'%');sh('r-2y-s',fred.DGS2.value&&fred.DFF?.value&&fred.DGS2.value<fred.DFF.value?'ä½äºFFR':'');sh('rs-2y',stag(SRC.fred));sh('rf-2y',fbadge(fred.DGS2.date,false));}
  if(fred.DGS10?.value!=null||tnx?.price){const v=tnx?.price??fred.DGS10?.value;if(v!=null){sv('r-10y',fmt(v)+'%');sh('rs-10y',stag(tnx?SRC.yahoo:SRC.fred));sh('rf-10y',fbadge(tnx?now:fred.DGS10?.date,!!tnx));}}
  if(tyx?.price){sv('r-30y',fmt(tyx.price)+'%');sh('rs-30y',stag(SRC.yahoo));}
  if(fred.T10Y2Y?.value!=null){const s=fred.T10Y2Y.value;sv('r-sp',(s>=0?'+':'')+fmt(s)+'%',s>=0?'up':'dn');sh('r-sp-s',s>=0?'æ­£æ–œç‡âœ…':'å€’æŒ‚âš ï¸');sh('rs-sp',stag(SRC.fred));sh('rf-sp',fbadge(fred.T10Y2Y.date,false));}
  if(fred.T5YIE?.value!=null){sv('r-bei',fmt(fred.T5YIE.value)+'%');sh('rs-bei',stag(SRC.fred));sh('rf-bei',fbadge(fred.T5YIE.date,false));}
  if(fred.DFII10?.value!=null){sv('r-tips',fmt(fred.DFII10.value)+'%');sh('rs-tips',stag(SRC.fred));sh('rf-tips',fbadge(fred.DFII10.date,false));sv('pm-t',fmt(fred.DFII10.value)+'%');}

  // â”€â”€ ä¿¡ç”¨ â”€â”€
  if(fred.BAMLH0A0HYM2?.value!=null){const bp=Math.round(fred.BAMLH0A0HYM2.value*100);sv('cr-hy',bp+'bp',bp<350?'up':'dn');sh('cr-hy-s',bp<500?'<span class="sig sg">å®‰å…¨</span>':'<span class="sig sr">å‹åŠ›</span>');sh('crs-hy',stag(SRC.fred));sh('crf-hy',fbadge(fred.BAMLH0A0HYM2.date,false));sv('ks-hy',bp>400?'ğŸ”´è§¦å‘!':'âœ… '+bp+'bp',bp>400?'dn':'up');}
  if(fred.BAMLC0A4CBBB?.value!=null){const bp=Math.round(fred.BAMLC0A4CBBB.value*100);sv('cr-ig',bp+'bp',bp<150?'up':'nt');sh('cr-ig-s',bp<200?'<span class="sig sg">å®‰å…¨</span>':'<span class="sig sr">å‹åŠ›</span>');sh('crs-ig',stag(SRC.fred));sh('crf-ig',fbadge(fred.BAMLC0A4CBBB.date,false));}
  if(vix?.price){const v=vix.price;sv('cr-vix',fmt(v),v>25?'dn':v>20?'nt':'up');sh('cr-vix-s',v<20?'<span class="sig sg">ä½æ³¢åŠ¨</span>':v<25?'<span class="sig sy">ä¸­æ€§</span>':'<span class="sig sr">é«˜æ³¢åŠ¨</span>');sh('crs-vix',stag(SRC.yahoo));sh('crf-vix',fbadge(now,true));sv('ks-vix',v>35?'ğŸ”´è§¦å‘!':'âœ… '+fmt(v),v>35?'dn':'up');}
  // Risk meter
  let rs=10;if(vix?.price>25)rs+=20;if(vix?.price>35)rs+=30;if(fred.BAMLH0A0HYM2?.value>4)rs+=25;
  document.getElementById('risk-m').style.cssText=`width:${rs}%;background:${rs<30?'var(--green)':rs<60?'var(--orange)':'var(--red)'}`;
  document.getElementById('risk-s').textContent=(rs<30?'ä½é£é™©':rs<60?'ä¸­é£é™©':'é«˜é£é™©')+` (${rs}/100)`;
  document.getElementById('risk-s').style.color=rs<30?'var(--green)':rs<60?'var(--orange)':'var(--red)';

  // â”€â”€ æµåŠ¨æ€§ â”€â”€
  if(fred.WALCL?.value){const bs=fred.WALCL.value/1000000;sv('l-bs','$'+fmt(bs,3)+'T');sh('ls-bs',stag(SRC.fred));sh('lf-bs',fbadge(fred.WALCL.date,false));}

  // â”€â”€ BTC é“¾ä¸Š â”€â”€
  if(btc?.price){
    const c24=btc.change_24h,cl=c24>=0?'up':'dn';
    sv('b-price','$'+fmt(btc.price),cl);
    sh('b-ch24',`<span class="${cl}">${c24>=0?'+':''}${fmt(c24)}%</span>`);
    sv('ks-btc',btc.price<58000?'ğŸ”´è§¦å‘!':'âœ… $'+fmt(btc.price,0),btc.price<58000?'dn':'up');
  }
  if(fg?.value!=null){
    const fv=fg.value,fcl=fv<25?'dn':fv>75?'up':'nt';
    sv('b-fg-val',fv,fcl);
    sh('b-fg-lab',`<span class="${fcl}">${fg.label}</span>`);
  }
  // bgeometrics é“¾ä¸ŠæŒ‡æ ‡æ¸²æŸ“
  let ocScore=0,ocCount=0;
  if(bg.mvrv){
    const v=parseFloat(bg.mvrv.mvrvZscore);const pct=Math.min(100,Math.max(0,(v+1)/3*100));
    sv('oc-mvrv',fmt(v,3));document.getElementById('oc-mvrv-b').style.cssText=`width:${pct}%;background:${v<1?'var(--green)':v<2?'var(--orange)':'var(--red)'}`;
    const sig=v<1?'ğŸŸ¢æåº¦ä½ä¼°':v<2?'ğŸŸ¡ä½ä¼°åŒº':v<3?'ğŸŸ ä¸­æ€§':v<5?'ğŸ”´é«˜ä¼°':'â›”æ³¡æ²«';
    sh('oc-mvrv-s',sig);if(v<1){ocScore+=90;ocCount++;}else if(v<2){ocScore+=70;ocCount++;}else{ocScore+=40;ocCount++;}
  }
  if(bg.sopr){
    const v=parseFloat(bg.sopr.sopr);sv('oc-sopr',fmt(v,4));
    const pct=Math.min(100,Math.max(0,(v-0.9)/0.3*100));
    document.getElementById('oc-sopr-b').style.cssText=`width:${pct}%;background:${v<1?'var(--red)':v>1.03?'var(--orange)':'var(--green)'}`;
    const sig=v<0.97?'äºæŸæŠ›å”®':'ğŸŸ¢è·åˆ©å…‘ç°';sh('oc-sopr-s',sig);ocScore+=(v<1?40:75);ocCount++;
  }
  if(bg.nupl){
    const v=parseFloat(bg.nupl.nupl);sv('oc-nupl',fmt(v,4));
    const pct=Math.min(100,Math.max(0,(v+0.5)/1.5*100));
    document.getElementById('oc-nupl-b').style.cssText=`width:${pct}%;background:${v<0.25?'var(--green)':v<0.5?'var(--orange)':'var(--red)'}`;
    const sig=v<0?'ğŸŸ¢æŠ•é™åº•éƒ¨':v<0.25?'ğŸŸ¢ç§¯ç´¯åŒº':v<0.5?'ğŸŸ¡ä¸­æ€§':v<0.75?'ğŸ”´ä¹è§‚åŒº':'â›”æåº¦è´ªå©ª';
    sh('oc-nupl-s',sig);ocScore+=(v<0.25?90:v<0.5?65:40);ocCount++;
  }
  if(bg.puell){
    const v=parseFloat(bg.puell.puellMultiple);sv('oc-puell',fmt(v,3));
    const pct=Math.min(100,Math.max(0,v/5*100));
    document.getElementById('oc-puell-b').style.cssText=`width:${pct}%;background:${v<0.5?'var(--green)':v<1?'var(--orange)':'var(--red)'}`;
    const sig=v<0.5?'ğŸŸ¢çŸ¿å·¥æåº¦ä½ä¼°':v<1?'ğŸŸ¡çŸ¿å·¥ä½ä¼°':v<2?'ğŸ”´ä¸­æ€§':'â›”çŸ¿å·¥é«˜åˆ©æ¶¦';
    sh('oc-puell-s',sig);ocScore+=(v<1?85:v<2?60:35);ocCount++;
  }
  if(bg.addr){
    const v=bg.addr.activeAddresses;sv('oc-addr',fmt(v,0));
    sh('oc-addr-s',v>900000?'ğŸŸ¢é«˜æ´»è·ƒ':v>700000?'ğŸŸ¡ä¸­æ´»è·ƒ':'æ´»è·ƒåº¦ä½');
  }
  if(bg.rp&&btc?.price){
    const rp=parseFloat(bg.rp.realizedPrice);
    sv('b-rp','$'+fmt(rp,0),'gl');
    const prem=(btc.price-rp)/rp*100;
    sh('b-rp-sub',`è¾ƒå·²å®ç°ä»· ${prem>=0?'+':''}${fmt(prem,1)}%`);
  }
  if(ocCount>0){
    const avg=Math.round(ocScore/ocCount);
    document.getElementById('oc-total-m').style.cssText=`width:${avg}%;background:${avg>70?'var(--green)':avg>50?'var(--orange)':'var(--red)'}`;
    document.getElementById('oc-total-s').textContent=(avg>70?'ğŸŸ¢é“¾ä¸Šæåº¦ä½ä¼°ï¼ˆå†å²çº§ä¹°ç‚¹ï¼‰':avg>55?'ğŸŸ¡é“¾ä¸Šä½ä¼°åŒºé—´':avg>40?'ä¸­æ€§':'ğŸ”´é“¾ä¸Šé«˜ä¼°åŒºé—´')+` ${avg}/100`;
    document.getElementById('oc-total-s').style.color=avg>70?'var(--green)':avg>50?'var(--orange)':'var(--red)';
  }

  // â”€â”€ å‘Šè­¦ â”€â”€
  let ah='';
  ah+=`<div class="obox"><div class="at">ğŸŸ¢ æœ€å¤§éå¯¹ç§°æœºä¼šï¼šBTCé“¾ä¸Šä¿¡å·å†å²çº§ä½ä¼°</div><div style="font-size:10px">MVRV Z-Score ${bg.mvrv?parseFloat(bg.mvrv.mvrvZscore).toFixed(3):'â€”'} Â· NUPL ${bg.nupl?parseFloat(bg.nupl.nupl).toFixed(3):'â€”'} Â· Puell ${bg.puell?parseFloat(bg.puell.puellMultiple).toFixed(3):'â€”'}<br>ä¸‰æŒ‡æ ‡åŒæ—¶å¤„äº"ç§¯ç´¯åŒº"ï¼Œå†å²ä¸Šæ­¤åŒºé—´ä¹°å…¥æŒæœ‰12ä¸ªæœˆå‡ç›ˆåˆ©ã€‚</div></div>`;
  ah+=`<div class="obox"><div class="at">ğŸŸ¢ é»„é‡‘ï¼šDalio Stage 6 ç»“æ„ç‰›å¸‚</div><div style="font-size:10px">æ»èƒ€è±¡é™ + å…¨çƒå»ç¾å…ƒåŒ– + å¤®è¡Œè´­é‡‘ = å¤šå¹´ç»“æ„æ€§å¤šå¤´ã€‚å›è°ƒæ˜¯ä¹°ç‚¹ã€‚</div></div>`;
  ah+=`<div class="abox"><div class="at">âš ï¸ æ»èƒ€-Liteè±¡é™ï¼šç¾è‚¡ä¼°å€¼æ‰¿å‹</div><div style="font-size:10px">Core PCE 3.0% + GDP 1.4% + 15%å…¨çƒå…³ç¨ = Stagflation tradeã€‚J.P. Morganï¼š2026é›¶é™æ¯æ¦‚ç‡ä¸Šå‡ã€‚</div></div>`;
  ah+=`<div class="abox"><div class="at">âš ï¸ "Sell America" å™äº‹åŠ é€Ÿ</div><div style="font-size:10px">DXY ${dxy?.price?fmt(dxy.price):'â€”'} Â· EUæš‚åœç¾æ¬§è´¸æ˜“åå®š Â· èªæ˜é’±ï¼ˆDruck+Ackmanï¼‰å·²å¸ƒå±€éç¾/å·´è¥¿/èƒ½æºã€‚</div></div>`;
  if(vix?.price>25)ah+=`<div class="abox"><div class="at">ğŸ”´ VIX ${fmt(vix.price)} â€” é«˜æ³¢åŠ¨è­¦æŠ¥</div><div style="font-size:10px">ç³»ç»Ÿæ€§é£é™©ä¸Šå‡ï¼Œå»ºè®®é™ä½ç»„åˆbetaã€‚</div></div>`;
  sh('alerts-c',ah);

  // â”€â”€ Kill Switch DXY â”€â”€
  if(dxy?.price)sv('ks-dxy',dxy.price>105?'ğŸ”´è§¦å‘!':'âœ… '+fmt(dxy.price),dxy.price>105?'dn':'up');

  // â”€â”€ Data quality â”€â”€
  sh('val-c',`<div style="font-size:10px;color:var(--green)">âœ… v4.0 | FREDä¸²è¡Œä¿®å¤ | bgeometricsé“¾ä¸Š | å®è§‚æ—¥å† | åˆ†æå¸ˆè§‚ç‚¹</div><div style="font-size:10px;color:var(--dim);margin-top:3px">å¤±è´¥è¯·æ±‚: ${errs} | Yahooâ†’CORSä»£ç† | FREDä¸²è¡Œ300ms | BGä¸²è¡Œ200ms | 60såˆ·æ–°</div>`);
  sh('conn',`<span style="color:${errs>12?'var(--red)':'var(--green)'}">â— ${errs>12?'éƒ¨åˆ†ç¦»çº¿':'åœ¨çº¿'}</span>`);
}

// â”€â”€â”€ ä¸»å¾ªç¯ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
renderCalendar();

async function poll(){
  try{
    document.getElementById('dot').className='dot loading';
    const data=await fetchAll();
    render(data);
  }catch(e){
    document.getElementById('dot').className='dot err';
    sh('conn','<span style="color:var(--red)">â— ç¦»çº¿</span>');
    sh('val-c',`<div style="font-size:11px;color:var(--red)">âŒ ${e.message}</div>`);
    console.error('[Macro Oracle v4.0]',e);
  }
}
poll();
setInterval(poll,REFRESH_MS);
</script>
</body>
</html>
